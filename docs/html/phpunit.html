<!DOCTYPE html>
<html lang="ja" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PHPUnit ãƒ†ã‚¹ãƒˆè§£èª¬ - Laravel</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.19/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen bg-base-200">
    <!-- Navbar -->
    <div class="navbar bg-base-100 shadow-lg">
        <div class="flex-1">
            <a href="index.html" class="btn btn-ghost text-xl">ğŸ“š Laravel ãƒ†ã‚¹ãƒˆãƒ»ç›£æŸ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>
        </div>
        <div class="flex-none">
            <ul class="menu menu-horizontal px-1">
                <li><a href="index.html">ãƒ›ãƒ¼ãƒ </a></li>
                <li><a href="phpunit.html" class="font-bold text-primary">PHPUnit</a></li>
                <li><a href="dusk.html">Laravel Dusk</a></li>
                <li><a href="audit.html">ç›£æŸ»ãƒ­ã‚°</a></li>
            </ul>
        </div>
    </div>

    <!-- Header -->
    <div class="bg-gradient-to-r from-accent to-primary py-16">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-4xl font-bold text-white mb-4">ğŸ§ª PHPUnit ãƒ†ã‚¹ãƒˆ</h1>
            <p class="text-white/80">Unit Testã¨Feature Testã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å“è³ªã‚’ä¿è¨¼</p>
        </div>
    </div>

    <div class="container mx-auto px-4 py-12">

        <!-- Unit vs Feature -->
        <div class="card bg-base-100 shadow-xl mb-12">
            <div class="card-body">
                <h2 class="card-title text-2xl mb-6">ğŸ“Š Unit Test vs Feature Test</h2>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Unit Test -->
                    <div class="border-2 border-accent rounded-xl p-6">
                        <h3 class="text-xl font-bold text-accent mb-4">ğŸ”¬ Unit Test</h3>
                        <div class="space-y-4">
                            <div class="flex items-start gap-3">
                                <span class="badge badge-accent">ç›®çš„</span>
                                <span>å˜ä¸€ã‚¯ãƒ©ã‚¹ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ã®å‹•ä½œæ¤œè¨¼</span>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="badge badge-accent">ã‚¹ã‚³ãƒ¼ãƒ—</span>
                                <span>Service, Model, Helper ãªã©</span>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="badge badge-accent">å¤–éƒ¨ä¾å­˜</span>
                                <span>ãƒ¢ãƒƒã‚¯ãƒ»ã‚¹ã‚¿ãƒ–ã§ç½®æ›</span>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="badge badge-accent">é€Ÿåº¦</span>
                                <span>âš¡ éå¸¸ã«é«˜é€Ÿ</span>
                            </div>
                        </div>

                        <div class="mockup-code mt-6">
                            <pre data-prefix="1"><code>// tests/Unit/TicketServiceTest.php</code></pre>
                            <pre data-prefix="2"><code>class TicketServiceTest extends TestCase</code></pre>
                            <pre data-prefix="3"><code>{</code></pre>
                            <pre data-prefix="4" class="text-success"><code>    /** @test */</code></pre>
                            <pre data-prefix="5"><code>    public function it_can_create_a_ticket()</code></pre>
                            <pre data-prefix="6"><code>    {</code></pre>
                            <pre data-prefix="7"><code>        $service = app(TicketService::class);</code></pre>
                            <pre data-prefix="8"><code>        $ticket = $service->createTicket([</code></pre>
                            <pre data-prefix="9"><code>            'title' => 'Test',</code></pre>
                            <pre data-prefix="10"><code>            'type' => 'incident'</code></pre>
                            <pre data-prefix="11"><code>        ]);</code></pre>
                            <pre data-prefix="12"
                                class="text-warning"><code>        $this->assertInstanceOf(Ticket::class, $ticket);</code></pre>
                            <pre data-prefix="13"><code>    }</code></pre>
                            <pre data-prefix="14"><code>}</code></pre>
                        </div>
                    </div>

                    <!-- Feature Test -->
                    <div class="border-2 border-primary rounded-xl p-6">
                        <h3 class="text-xl font-bold text-primary mb-4">ğŸ”— Feature Test</h3>
                        <div class="space-y-4">
                            <div class="flex items-start gap-3">
                                <span class="badge badge-primary">ç›®çš„</span>
                                <span>è¤‡æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çµ±åˆå‹•ä½œæ¤œè¨¼</span>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="badge badge-primary">ã‚¹ã‚³ãƒ¼ãƒ—</span>
                                <span>HTTP, Livewire, DBé€£æº</span>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="badge badge-primary">å¤–éƒ¨ä¾å­˜</span>
                                <span>å®Ÿéš›ã®DBãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½¿ç”¨</span>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="badge badge-primary">é€Ÿåº¦</span>
                                <span>ğŸš¶ ä¸­ç¨‹åº¦</span>
                            </div>
                        </div>

                        <div class="mockup-code mt-6">
                            <pre data-prefix="1"><code>// tests/Feature/TicketFeatureTest.php</code></pre>
                            <pre data-prefix="2"><code>class TicketFeatureTest extends TestCase</code></pre>
                            <pre data-prefix="3"><code>{</code></pre>
                            <pre data-prefix="4" class="text-success"><code>    use RefreshDatabase;</code></pre>
                            <pre data-prefix="5"><code></code></pre>
                            <pre data-prefix="6"><code>    /** @test */</code></pre>
                            <pre data-prefix="7"><code>    public function user_can_view_ticket_list()</code></pre>
                            <pre data-prefix="8"><code>    {</code></pre>
                            <pre data-prefix="9"><code>        Livewire::test('tickets.index')</code></pre>
                            <pre data-prefix="10"
                                class="text-warning"><code>            ->assertSee('Tickets');</code></pre>
                            <pre data-prefix="11"><code>    }</code></pre>
                            <pre data-prefix="12"><code>}</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Test Flow Diagram -->
        <div class="card bg-base-100 shadow-xl mb-12">
            <div class="card-body">
                <h2 class="card-title text-2xl mb-6">ğŸ”„ TDD ã‚µã‚¤ã‚¯ãƒ« (Red-Green-Refactor)</h2>

                <div class="flex flex-col lg:flex-row items-center justify-center gap-4 py-8">
                    <!-- Red -->
                    <div class="flex flex-col items-center">
                        <div
                            class="w-32 h-32 bg-error rounded-full flex items-center justify-center text-error-content">
                            <div class="text-center">
                                <div class="text-3xl">âŒ</div>
                                <div class="font-bold">RED</div>
                            </div>
                        </div>
                        <div class="mt-2 text-sm text-center">å¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ã</div>
                    </div>

                    <div class="text-4xl text-primary hidden lg:block">â†’</div>
                    <div class="text-4xl text-primary lg:hidden">â†“</div>

                    <!-- Green -->
                    <div class="flex flex-col items-center">
                        <div
                            class="w-32 h-32 bg-success rounded-full flex items-center justify-center text-success-content">
                            <div class="text-center">
                                <div class="text-3xl">âœ…</div>
                                <div class="font-bold">GREEN</div>
                            </div>
                        </div>
                        <div class="mt-2 text-sm text-center">ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã</div>
                    </div>

                    <div class="text-4xl text-primary hidden lg:block">â†’</div>
                    <div class="text-4xl text-primary lg:hidden">â†“</div>

                    <!-- Refactor -->
                    <div class="flex flex-col items-center">
                        <div class="w-32 h-32 bg-info rounded-full flex items-center justify-center text-info-content">
                            <div class="text-center">
                                <div class="text-3xl">ğŸ”§</div>
                                <div class="font-bold">REFACTOR</div>
                            </div>
                        </div>
                        <div class="mt-2 text-sm text-center">ã‚³ãƒ¼ãƒ‰ã‚’æ”¹å–„ã™ã‚‹</div>
                    </div>

                    <div class="text-4xl text-primary hidden lg:block">â†’</div>
                    <div class="text-4xl text-primary lg:hidden">â†“</div>

                    <!-- Back to Red -->
                    <div class="flex flex-col items-center opacity-50">
                        <div
                            class="w-20 h-20 bg-error rounded-full flex items-center justify-center text-error-content">
                            <div class="text-center">
                                <div class="text-xl">ğŸ”</div>
                            </div>
                        </div>
                        <div class="mt-2 text-sm text-center">ç¹°ã‚Šè¿”ã™</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Important Traits -->
        <div class="card bg-base-100 shadow-xl mb-12">
            <div class="card-body">
                <h2 class="card-title text-2xl mb-6">ğŸ› ï¸ é‡è¦ãªãƒˆãƒ¬ã‚¤ãƒˆ</h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="alert alert-info">
                        <div>
                            <h3 class="font-bold">RefreshDatabase</h3>
                            <p class="text-sm">å„ãƒ†ã‚¹ãƒˆå¾Œã«DBã‚’ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ã‚„ã‚Šç›´ã™ã€‚ãƒ†ã‚¹ãƒˆé–“ã®ç‹¬ç«‹æ€§ã‚’ä¿è¨¼ã€‚</p>
                            <code class="text-xs mt-2 block">use Illuminate\Foundation\Testing\RefreshDatabase;</code>
                        </div>
                    </div>

                    <div class="alert alert-warning">
                        <div>
                            <h3 class="font-bold">DatabaseTransactions</h3>
                            <p class="text-sm">å„ãƒ†ã‚¹ãƒˆã‚’ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§ãƒ©ãƒƒãƒ—ã—ã€çµ‚äº†å¾Œãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€‚RefreshDatabaseã‚ˆã‚Šé«˜é€Ÿã€‚</p>
                            <code
                                class="text-xs mt-2 block">use Illuminate\Foundation\Testing\DatabaseTransactions;</code>
                        </div>
                    </div>

                    <div class="alert alert-success">
                        <div>
                            <h3 class="font-bold">WithFaker</h3>
                            <p class="text-sm">Fakerã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æä¾›ã€‚ãƒ©ãƒ³ãƒ€ãƒ ãªãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã«ä¾¿åˆ©ã€‚</p>
                            <code class="text-xs mt-2 block">use Illuminate\Foundation\Testing\WithFaker;</code>
                        </div>
                    </div>

                    <div class="alert alert-error">
                        <div>
                            <h3 class="font-bold">DatabaseMigrations</h3>
                            <p class="text-sm">âš ï¸ Duskã§ã¯ä½¿ç”¨ä¸å¯ï¼ˆåˆ¥ãƒ—ãƒ­ã‚»ã‚¹ã®ãŸã‚DBå…±æœ‰ã•ã‚Œãªã„ï¼‰</p>
                            <code
                                class="text-xs mt-2 block">use Illuminate\Foundation\Testing\DatabaseMigrations;</code>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Commands -->
        <div class="card bg-base-100 shadow-xl mb-12">
            <div class="card-body">
                <h2 class="card-title text-2xl mb-6">âŒ¨ï¸ ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰</h2>

                <div class="overflow-x-auto">
                    <table class="table table-zebra">
                        <thead>
                            <tr>
                                <th>ã‚³ãƒãƒ³ãƒ‰</th>
                                <th>èª¬æ˜</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code class="text-primary">php artisan test</code></td>
                                <td>å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</td>
                            </tr>
                            <tr>
                                <td><code class="text-primary">php artisan test --filter=TicketServiceTest</code></td>
                                <td>ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã®ã¿å®Ÿè¡Œ</td>
                            </tr>
                            <tr>
                                <td><code class="text-primary">php artisan test --filter=it_can_create</code></td>
                                <td>ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰åã§ãƒ•ã‚£ãƒ«ã‚¿</td>
                            </tr>
                            <tr>
                                <td><code class="text-primary">php artisan test --parallel</code></td>
                                <td>ä¸¦åˆ—å®Ÿè¡Œï¼ˆé«˜é€ŸåŒ–ï¼‰</td>
                            </tr>
                            <tr>
                                <td><code class="text-primary">php artisan make:test TicketTest</code></td>
                                <td>Feature ãƒ†ã‚¹ãƒˆä½œæˆ</td>
                            </tr>
                            <tr>
                                <td><code class="text-primary">php artisan make:test TicketTest --unit</code></td>
                                <td>Unit ãƒ†ã‚¹ãƒˆä½œæˆ</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Assertions Reference -->
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title text-2xl mb-6">âœ… ã‚ˆãä½¿ã†ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³</h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="mockup-code">
                        <pre data-prefix=""><code class="text-success">// åŸºæœ¬ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³</code></pre>
                        <pre data-prefix=""><code>$this->assertTrue($value);</code></pre>
                        <pre data-prefix=""><code>$this->assertEquals('expected', $actual);</code></pre>
                        <pre data-prefix=""><code>$this->assertCount(5, $array);</code></pre>
                        <pre data-prefix=""><code>$this->assertNull($value);</code></pre>
                    </div>

                    <div class="mockup-code">
                        <pre data-prefix=""><code class="text-success">// DBã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³</code></pre>
                        <pre data-prefix=""><code>$this->assertDatabaseHas('tickets', [</code></pre>
                        <pre data-prefix=""><code>    'title' => 'Test Ticket'</code></pre>
                        <pre data-prefix=""><code>]);</code></pre>
                        <pre data-prefix=""><code>$this->assertDatabaseMissing('tickets', [...]);</code></pre>
                    </div>

                    <div class="mockup-code">
                        <pre data-prefix=""><code class="text-success">// HTTPã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³</code></pre>
                        <pre data-prefix=""><code>$response->assertStatus(200);</code></pre>
                        <pre data-prefix=""><code>$response->assertRedirect('/login');</code></pre>
                        <pre data-prefix=""><code>$response->assertSee('Welcome');</code></pre>
                    </div>

                    <div class="mockup-code">
                        <pre data-prefix=""><code class="text-success">// Livewireã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³</code></pre>
                        <pre data-prefix=""><code>Livewire::test('tickets.index')</code></pre>
                        <pre data-prefix=""><code>    ->set('search', 'test')</code></pre>
                        <pre data-prefix=""><code>    ->call('filter')</code></pre>
                        <pre data-prefix=""><code>    ->assertSee('Test Ticket');</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer footer-center p-10 bg-base-300 text-base-content mt-12">
        <aside>
            <p>OpsHub ãƒ†ã‚¹ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ - PHPUnitç·¨</p>
        </aside>
    </footer>
</body>

</html>